using System.Collections.Generic;

namespace Etcher
{
    public static class Map
    {
        public static readonly string[] Levels =
        {
            "##########oooooooooooooooooooo##########\n" +
            "##########oooooooooooooooooooo##########\n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##   0                                  \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                             3        \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##########oooooooooooooooooooo##########\n" +
            "##########oooooooooooooooooooo##########\n",

            "########################################\n" +
            "########################################\n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                  4   \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "##       [         ####        ]        \n" +
            "##                 ####                 \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                  0   \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "########################################\n" +
            "########################################\n",

            "##############################oooo######\n" +
            "##############################oooo######\n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##      ###<<<<<<<<<<<<<<<<<<<<###      \n" +
            "oo      ###<<<<<<<<<<<<<<<<<<<<###      \n" +
            "oo      ###                    ###      \n" +
            "oo      ###                 5  ###      \n" +
            "oo      ###                    ###      \n" +
            "oo      ###                    ###      \n" +
            "oo      ###>>>>>>>>>>>>>>>>>>>>###      \n" +
            "##      ###>>>>>>>>>>>>>>>>>>>>###      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##############################oooo######\n" +
            "##############################oooo######\n",

            "########################################\n" +
            "########################################\n" +
            "##                                      \n" +
            "##                                      \n" +
            "oo                                0     \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo      @                               \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                ####  \n" +
            "##                                #     \n" +
            "##                                #     \n" +
            "##                                #  ###\n" +
            "##                                # 1   \n" +
            "##                                #     \n" +
            "##      3                         ####  \n" +
            "##                             4        \n" +
            "##                                      \n" +
            "########################################\n" +
            "########################################\n",

            "########################################\n" +
            "########################################\n" +
            "##                                      \n" +
            "##                                      \n" +
            "##      0                               \n" +
            "##                                      \n" +
            "##<<<<<<<<####              ####<<<<<<<<\n" +
            "##<<<<<<<<####              ####<<<<<<<<\n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##         [                 ]          \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                 1    \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "##<<<<<<<<####              ####<<<<<<<<\n" +
            "##<<<<<<<<####              ####<<<<<<<<\n" +
            "##                                      \n" +
            "##      3                               \n" +
            "##                                      \n" +
            "##                                      \n" +
            "########################################\n" +
            "########################################\n",

            "##ooooo#################################\n" +
            "##ooooo#################################\n" +
            "##          <<<      >>>      <<<       \n" +
            "##          <<<      >>>      <<<       \n" +
            "##          <<<      >>>      <<<       \n" +
            "##          <<<      >>>      <<<       \n" +
            "##          <<<      >>>      <<<       \n" +
            "##          <<<      >>>      <<<       \n" +
            "#################################       \n" +
            "###################          2          \n" +
            "##                    ###########       \n" +
            "##    1                                 \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##        @                             \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##    0                                 \n" +
            "##                                      \n" +
            "##                                      \n" +
            "#####                                   \n" +
            "#########                               \n" +
            "########################################\n" +
            "########################################\n",

            "##oooooooooooooooooooooooooooooooooooooo\n" +
            "##oooooooooooooooooooooooooooooooooooooo\n" +
            "oo       ##         ##        ##        \n" +
            "oo                  ]         ]         \n" +
            "oo                                ##    \n" +
            "oo                                ## 1  \n" +
            "oo              ####                    \n" +
            "oo##                                    \n" +
            "oo[                                     \n" +
            "oo                  #####     ##        \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo              [                       \n" +
            "oo         #######            ]         \n" +
            "oo         ###                          \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                            ##        \n" +
            "oo                            ##        \n" +
            "oo       ]                    ##        \n" +
            "oo#########               ######        \n" +
            "oo       [                              \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo         #####  #       #             \n" +
            "oo                #       #      4      \n" +
            "oo           5    #       #             \n" +
            "oo    #####     ] #       #]            \n" +
            "##oooooooooooooo#############ooooooooooo\n" +
            "##oooooooooooooooooooooooooooooooooooooo\n",

            "########################################\n" +
            "########################################\n" +
            "##########                      ########\n" +
            "########                          ######\n" +
            "######[                           [ ####\n" +
            "####                 3                ##\n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                    1 \n" +
            "##                                      \n" +
            "##                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                 @                    \n" +
            "oo  ]                                   \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                    2 \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "####                                  ##\n" +
            "######                              ####\n" +
            "########]                       ] ######\n" +
            "##########                      ########\n" +
            "########################################\n" +
            "########################################\n",

            "########################################\n" +
            "########################################\n" +
            "##               [                      \n" +
            "##                                  4   \n" +
            "##  2                                   \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##<<<<<<<<<<<<<<<##                     \n" +
            "##<<<<<<<<<<<<<<<##           [         \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##               ]                      \n" +
            "##    #     #    ###############        \n" +
            "##               #                      \n" +
            "##       1       #                      \n" +
            "##               #                      \n" +
            "##    #  #  #    #               #<<##>>\n" +
            "##               #               #<<##>>\n" +
            "##               #               #<<##>>\n" +
            "##               #               #      \n" +
            "##               #               #  5   \n" +
            "##               #               #      \n" +
            "##ooooooooooooooo#######################\n" +
            "##ooooooooooooooo#######################\n",

            "###################oooo#################\n" +
            "##################oooooo################\n" +
            "##[                                   [ \n" +
            "##                                      \n" +
            "##  ##  ##  ##  ##  ##  ##  ##  ##  ##  \n" +
            "##  ##  ##  ##  ##  ##  ##  ##  ##  ##  \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##  ##  ##  ##  ##  ##  ##  ##  ##  ##  \n" +
            "##                  3                   \n" +
            "##                                      \n" +
            "##  ##################################  \n" +
            "##            #            #            \n" +
            "##            #            #            \n" +
            "##  #         #    # #     #         #  \n" +
            "##  #    #         # #          #    #  \n" +
            "##       #   2            2     #       \n" +
            "##       #                      #       \n" +
            "##  ##################################  \n" +
            "##                                      \n" +
            "##                  5                   \n" +
            "##  ##  ##  ##  ##  ##  ##  ##  ##  ##  \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##  ##  ##  ##  ##      ##  ##  ##  ##  \n" +
            "##  ##  ##  ##  ##      ##  ##  ##  ##  \n" +
            "##                                      \n" +
            "##                                      \n" +
            "########################################\n" +
            "########################################\n",

            "#####################################ooo\n" +
            "#####################################ooo\n" +
            "##                           #>>>>>>>>>>\n" +
            "##                           #>>>>>>>>>>\n" +
            "##                           #>>>>>>>>>>\n" +
            "##   0                   3   #>>      >>\n" +
            "##                           #>>  2   >>\n" +
            "##                           #>>      >>\n" +
            "##                           #>>  2   >>\n" +
            "##                           #>>      >>\n" +
            "##                            >>>>>>>>>>\n" +
            "##                            >>>>>>>>>>\n" +
            "##                           ###########\n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                              @       \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##   ########                           \n" +
            "##   ########                           \n" +
            "##   ########                           \n" +
            "##                                   1  \n" +
            "##     1                                \n" +
            "###################oooooo###############\n" +
            "###################oooooo###############\n",

            "####oooo##########################oooo##\n" +
            "####oooo##########################oooo##\n" +
            "##        ####              ####        \n" +
            "##        ####              ####        \n" +
            "##        ####      1       ####        \n" +
            "##        ####              ####        \n" +
            "##        <<<<              >>>>        \n" +
            "##        <<<<              >>>>        \n" +
            "##        <<<<              >>>>        \n" +
            "##        <<<<              >>>>        \n" +
            "##        <<<<              >>>>        \n" +
            "##        <<<<              >>>>        \n" +
            "##        <<<<              >>>>        \n" +
            "##        <<<<              >>>>        \n" +
            "##   0    <<<<              >>>>   0    \n" +
            "##        <<<<              >>>>        \n" +
            "##        <<<<              >>>>        \n" +
            "##        <<<<              >>>>        \n" +
            "##        <<<<              >>>>        \n" +
            "##        <<<<              >>>>        \n" +
            "##        <<<<              >>>>        \n" +
            "##        <<<<              >>>>        \n" +
            "##        <<<<              >>>>        \n" +
            "##        <<<<              >>>>        \n" +
            "##        ####              ####        \n" +
            "##        ####              ####        \n" +
            "##        ####      2       ####        \n" +
            "##        ####              ####        \n" +
            "####oooo##########################oooo##\n" +
            "####oooo##########################oooo##\n",

            "##oo######################oooooooo######\n" +
            "##oo######################oooooooo######\n" +
            "##          ]                           \n" +
            "##                                      \n" +
            "##   5                                  \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##################################[     \n" +
            "##                               #      \n" +
            "##                               #      \n" +
            "##                               #      \n" +
            "##                               #      \n" +
            "##         ################      #      \n" +
            "##         #                     #      \n" +
            "##         #                     #      \n" +
            "##         #         [           #      \n" +
            "##         #                     #      \n" +
            "##         #                     #      \n" +
            "##         #        #######      #      \n" +
            "##         #              #      #   ]  \n" +
            "##         #              #             \n" +
            "##         #              #             \n" +
            "##         #              #             \n" +
            "##         ####           #             \n" +
            "##                        #             \n" +
            "##                        #             \n" +
            "##                        #  1   #  4   \n" +
            "##                        #      #      \n" +
            "########################################\n" +
            "########################################\n",

            "##ooooo#################################\n" +
            "##ooooo#################################\n" +
            "##>>>>>                           <<<<<<\n" +
            "##>>>>>                           <<<<<<\n" +
            "##>>>>>                           <<<<<<\n" +
            "##>>>>>                           <<    \n" +
            "##>>>>>                           << 5  \n" +
            "##>>>>>                           <<    \n" +
            "##########          @           ########\n" +
            "##                                      \n" +
            "##                                      \n" +
            "##    1                            0    \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                  4                   \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##      ] ######################[       \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##    2                            3    \n" +
            "##                                      \n" +
            "##                                      \n" +
            "########################################\n" +
            "########################################\n",

            "#################ooooooo################\n" +
            "###############ooooooooooo##############\n" +
            "##                                      \n" +
            "##                                      \n" +
            "###     #     #     #     #     #     ##\n" +
            "##                        #             \n" +
            "##                        #             \n" +
            "##   4                    #  2          \n" +
            "##                        #             \n" +
            "###     #     #     #     #######     ##\n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "###     #     #     #     #     #     ##\n" +
            "oo      #                               \n" +
            "oo  2   #                               \n" +
            "oo      #                               \n" +
            "oo      #                               \n" +
            "###     #     #     #     #     #     ##\n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                0     \n" +
            "##                                      \n" +
            "###     #     #           #     #     ##\n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "###############ooooooooooo##############\n" +
            "#################ooooooo################\n",

            "##oooooooooooooooooooooooooooooooooooooo\n" +
            "##oooooooooooooooooooooooooooooooooooooo\n" +
            "##      0                       0       \n" +
            "##                                      \n" +
            "##  ##<<##  ##  ##  ##  ##  ##  ##<<##  \n" +
            "##  ##<<##  ##  ##  ##  ##  ##  ##<<##  \n" +
            "##  <<      1               1       <<  \n" +
            "##  <<                              <<  \n" +
            "##  ##  ##  ##  ##>>##>>##  ##  ##  ##  \n" +
            "##  ##  ##  ##  ##>>##>>##  ##  ##  ##  \n" +
            "##                  1                   \n" +
            "##                                      \n" +
            "##  ##  ##  ##  ##  ##  ##  ##  ##  ##  \n" +
            "##  ##  ##  ##  ##  ##  ##  ##  ##  ##  \n" +
            "##[         >>  2   2   2   >>          \n" +
            "##      1   >>              >>  1     ] \n" +
            "##  ##  ##  ##  ##  ##  ##  ##  ##  ##  \n" +
            "##  ##  ##  ##  ##  ##  ##  ##  ##  ##  \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##  ##  ##  ##  ##>>##>>##  ##  ##  ##  \n" +
            "##  ##  ##  ##  ##>>##>>##  ##  ##  ##  \n" +
            "##  <<                              <<  \n" +
            "##  <<      1       1       1       <<  \n" +
            "##  ##<<##  ##  ##      ##  ##  ##<<##  \n" +
            "##  ##<<##  ##  ##      ##  ##  ##<<##  \n" +
            "##                                      \n" +
            "##       0                      0       \n" +
            "##oooooooooooooooooooooooooooooooooooooo\n" +
            "##oooooooooooooooooooooooooooooooooooooo\n"
        };

        public static readonly string[] TutorialSteps =
        {
            "########################################\n" +
            "########################################\n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "########################################\n" +
            "########################################\n",

            "########################################\n" +
            "########################################\n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                              ####    \n" +
            "##                              ####    \n" +
            "##                              ####    \n" +
            "##                              ####    \n" +
            "##                              ####    \n" +
            "##                              ####    \n" +
            "##                              ####    \n" +
            "##                                      \n" +
            "##                                      \n" +
            "########################################\n" +
            "########################################\n",

            "########################################\n" +
            "########################################\n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "oo                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "##                                      \n" +
            "########################################\n" +
            "########################################\n"
        };

        public static List<IGameObject> Load(uint level, bool tutorialOn = false)
        {
            List<IGameObject> spriteSet = new List<IGameObject>();
            string[] levelSet = tutorialOn ? TutorialSteps : Levels;
            int row = 0;
            int column = 0;

            foreach(char ch in levelSet[level])
            {
                switch (ch)
                {
                    case '#':   
                        
                        const int BORDER_POSITION_TOP = 1;
                        const int BORDER_POSITION_BOTTOM = Game1.FULLFIELD_HEIGHT / Game1.TILE_SIZE - 2;
                        const int BORDER_POSITION_LEFT = 1;

                        if (column == BORDER_POSITION_LEFT && row == BORDER_POSITION_TOP)
                            spriteSet.Add(new Block(Images.BORDER_TOP_LEFT, column, row));
                        else if (column == BORDER_POSITION_LEFT && row == BORDER_POSITION_BOTTOM)
                            spriteSet.Add(new Block(Images.BORDER_BOTTOM_LEFT, column, row));
                        else if (column == BORDER_POSITION_LEFT && row > BORDER_POSITION_TOP && row < BORDER_POSITION_BOTTOM)
                            spriteSet.Add(new Block(Images.BORDER_LEFT, column, row));
                        else if (column > BORDER_POSITION_LEFT && row == BORDER_POSITION_TOP)
                            spriteSet.Add(new Block(Images.BORDER_TOP, column, row));
                        else if (column > BORDER_POSITION_LEFT && row == BORDER_POSITION_BOTTOM)
                            spriteSet.Add(new Block(Images.BORDER_BOTTOM, column, row));
                        else if (column < BORDER_POSITION_LEFT || row < BORDER_POSITION_TOP || row > BORDER_POSITION_BOTTOM)
                            spriteSet.Add(new Block(Images.BORDER, column, row));
                        else spriteSet.Add(new Block(Images.BLOCK, column, row, borderColor: false));

                        break;
                    case 'o': spriteSet.Add(new Gate(column, row));
                        break;
                    case '<': spriteSet.Add(new Zapper(column, row, offset: false));
                        break;
                    case '>': spriteSet.Add(new Zapper(column, row, offset: true));
                        break;
                    case '[': spriteSet.Add(new Rod(column, row, upward: false));
                        break;
                    case ']': spriteSet.Add(new Rod(column, row, upward: true));
                        break;
                    case '@': spriteSet.Add(new Vortex(column, row));
                        break;
                    case '\n':
                    case ' ':
                        break;
                }                 

                if (ch == '\n')
                {
                    row++;
                    column = 0;
                }
                else column++;
            }

            return spriteSet;
        }

        public static Stack<Pickup> LoadPickups(uint level, bool tutorialOn = false)
        {
            Stack<Pickup> pickups = new Stack<Pickup>();
            string[] levelSet = tutorialOn ? TutorialSteps : Levels;
            int row = 0;
            int column = 0;

            foreach (char ch in levelSet[level])
            {
                switch (ch)
                {
                    case '0': pickups.Push(new Points100(column, row));
                        break;
                    case '1': pickups.Push(new Points250(column, row));
                        break;
                    case '2': pickups.Push(new Points500(column, row));
                        break;
                    case '3': pickups.Push(new HyperSpeed(column, row));
                        break;
                    case '4': pickups.Push(new Clock(column, row));
                        break;
                    case '5': pickups.Push(new ExtraLife(column, row));
                        break;
                    case '\n':
                    case ' ':
                        break;
                }

                if (ch == '\n')
                {
                    row++;
                    column = 0;
                }
                else column++;
            }

            return pickups;
        }
    }
}
